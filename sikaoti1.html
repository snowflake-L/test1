<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>sikao</title>
    <style>
	canvas{
	border:1px solid red;	
	}
	</style>
</head>
<body>
<canvas width="800" height="500"></canvas>
    <script>
	var colors = (function () {
    return ( "aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,"+
    "blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk," +
    "crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta," +
    "darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray," +
    "darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick," +
    "floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey," +
    "honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon," +
    "lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink," +
    "lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow," +
    "lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple," +
    "mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue," +
    "mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid," +
    "palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue," +
    "purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna," +
    "silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,transparent," +
    "tomato,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen" ).split(',');
})();
// console.log(colors);

	var c=document.querySelector("canvas");
	var ctx=c.getContext("2d");	
	function sum(arr){
		var sum=0;
		for(var i=0;i<arr.length;i++){
			sum +=arr[i];
		}
		return sum;
	}
	
	
	function draw(x,y,r,arr,b){	
		ctx.clearRect(-x,-y,c.width,c.height);
		var st0,st1;
		for(var i=0;i<arr.length;i++){
			ctx.beginPath();
			var rate=arr[i]/sum(arr);
			console.log(sum(arr));
			console.log(rate);
			// st1=st0+rate*2*Math.PI;
			st0= i===0?b:st1;
			//st1=st0+rate*2*Math.PI;
			st1=st0+rate*2*Math.PI;
			ctx.moveTo(x,y);			
			ctx.arc(x,y,r,st0,st1);

			ctx.strokeText(arr[i],x+Math.cos((st0+st1)/2)*(r+10),y+Math.sin((st0+st1)/2)*(r+10));
			ctx.fillStyle="rgba("+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+","+parseInt(Math.random()*255)+",1)";
			//ctx.fillStyle=colors[i*11];
			// ctx.closePath();
			ctx.fill();			
			ctx.stroke();
			
		}
		console.log(arr);
	}
		var arr=[2,6,8,9,10,20,30];
		var timer=setInterval(function(){
			ctx.rotate(0.1*Math.PI);
			draw(300,300,100,arr,Math.PI);

		});
		
	/*	
		function drawk(data){
			
			var	sum=0,
				rate,
				st0,
				st1;
			data.forEach(function(v,i){
				sum +=v;
				rate=v/sum;
				st0=b+(i===0?0:st1);
				st1=st0+rate*Math.PI*2;
				ctx.beginPath();
				ctx.moveTo(x,y);			
				ctx.arc(x,y,r,st0,st1);
				ctx.fillStyle=colors[i];
				ctx.fill();
			});
					
		}
	
	*/
	
	</script>
</body>
</html>